/* Styles spécifiques pour les écrans jusqu'à 768px */

*,
*:before,
*:after {
    box-sizing: border-box;
}

:root {
    --mobile-font-size-base: clamp(10px, 3vw, 12px);
    --mobile-title-size: clamp(16px, 5vw, 22px);
    --mobile-spacing: clamp(8px, 2.5vw, 12px);
    /* NOUVEAU: Variable pour la hauteur du mini-lecteur */
    --mobile-player-height: 0px;
}

html,
body {
    padding: 0;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
}

.main-grid-layout {
    grid-template-columns: 1fr;
    /* Une seule colonne */
    grid-template-rows: auto 1fr;
    /* Barre du haut, puis contenu */
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
}

.sidebar {
    /* CORRECTION: S'assure que la sidebar est toujours masquée sur mobile */
    display: none !important;
}

.main-area {
    grid-column: 1 / -1;
    /* Prend toute la largeur */
    display: flex;
    flex-direction: column;
    overflow: hidden;
    flex-grow: 1;
    transition: padding-bottom 0.3s ease-out;
}

.page-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0;
    padding: 0;
    /* All page sections will have no padding */
}

.page-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: var(--mobile-spacing);
    /* General padding */
    padding-bottom: 100px;
    /* Large padding at the bottom */
}



/* CORRECTION: Fait en sorte que le lecteur vidéo prenne tout l'espace sur mobile */
#large-player-section {
    padding: 0;
    height: 100%;
    display: flex;
    align-items: center;
}

/* NOUVEAU: Rend le bouton plein écran visible sur le lecteur vidéo mobile */
.player-container .fullscreen-btn {
    opacity: 0.8;
    /* CORRECTION: Centrage du bouton en bas pour ne pas gêner les contrôles YouTube */
    left: 50%;
    transform: translateX(-50%);
    right: auto;
    bottom: 15px;
}

/* NOUVEAU: Bouton pour quitter le plein écran sur mobile */
.player-container .exit-fullscreen-btn {
    position: absolute;
    bottom: 15px;
    /* CORRECTION: Position en bas */
    left: 15px;
    /* CORRECTION: Position à gauche */
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    font-size: 1.3rem;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2147483647;
    /* S'assurer qu'il est au-dessus de tout */
    opacity: 0;
    pointer-events: none;
    /* N'est pas cliquable quand il est invisible */
    transition: opacity 0.3s ease;
}

.player-container .exit-fullscreen-btn.visible {
    opacity: 0.8;
    pointer-events: auto;
    /* Devient cliquable */
}

.card__title {
    font-size: 0.85em;
}

.card__description {
    font-size: 0.75em;
}

/* NOUVEAU: Réduit la taille du texte "morceaux à débloquer" sur mobile */
/* NOUVEAU: Empêche la sélection de texte sur les cartes lors d'un appui long */
.card {
    user-select: none;
    -webkit-user-select: none;
    /* Pour Safari */
}

/* CORRECTION: Applique la réduction de taille à TOUS les types de cartes avec ce texte */
.card.has-unlockable-text .card__description,
.card.locked .card__description {
    font-size: 0.65em;
    opacity: 0.9;
}

/* NOUVEAU: Désactive le feedback tactile bleu par défaut du navigateur */
* {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;

    /* NOUVEAU: Ajoute l'animation "pop" au clic sur mobile via CSS pour plus de fiabilité */
    /* MODIFICATION: Amélioration du feedback tactile avec un effet moderne et élégant */
    .clickable-icon:active,
    button:active,
    .top-bar-btn:active,
    .mobile-nav-link:active,
    .card:active,
    .shop-product-card:active,
    .shop-list-item:active {
        /* Animation de scale subtile */
        transform: scale(0.95);
        transition: transform 0.1s ease-out;
        /* Effet de brillance moderne */
        background-color: rgba(0, 0, 0, 0.05);
        border-radius: 12px;
    }

    /* NOUVEAU: Feedback tactile pour le thème sombre */
    body.dark-theme .clickable-icon:active,
    body.dark-theme button:active,
    body.dark-theme .top-bar-btn:active,
    body.dark-theme .mobile-nav-link:active,
    body.dark-theme .card:active,
    body.dark-theme .shop-product-card:active,
    body.dark-theme .shop-list-item:active {
        background-color: rgba(255, 255, 255, 0.08);
    }

    /* CORRECTION: Harmonise la taille du titre de la boutique avec les autres sections sur mobile */
    .shop-title {
        font-size: 1.2em;
        margin-bottom: 10px;
    }

    /* NOUVEAU: Animation de feedback tactile */
    @keyframes tap-feedback {
        0% {
            transform: scale(1);
            background-color: transparent;
        }

        50% {
            transform: scale(0.95);
        }

        100% {
            transform: scale(1);
            background-color: transparent;
        }
    }

    .top-bar-right {
        display: none !important;
        /* On cache les anciens éléments */
    }

    /* CORRECTION: La rangée supplémentaire est supprimée */
    .mobile-header-top {
        display: none;
    }

    /* NOUVEAU: Styles pour le header mobile */
    .mobile-header-icons {
        display: flex;
        align-items: center;
        justify-content: space-between; /* Aligne les éléments aux extrémités */
        width: 100%;
        padding: 4px 8px;
        box-sizing: border-box;
    }

    /* NOUVEAU: Style pour le logo MMGEAR */
    .mobile-header-logo {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--text-color);
        padding-left: 8px; /* Petit espace à gauche */
    }

    /* CORRECTION: Assure que les icônes de droite s'alignent bien en ligne */
    .mobile-header-right-icons {
        display: flex;
        align-items: center;
        justify-content: flex-end; /* Aligne les icônes à droite */
        gap: 8px; /* Ajoute un petit espace entre les icônes */
    }

    /* NOUVEAU: Masque le bouton "Retour" sur mobile car le swipe est disponible */
    .mobile-header-icons .back-btn,
    .sidebar .back-btn {
        display: none;
    }

    .search-bar {
        /* MODIFICATION: Application du style de la version ordinateur */
        display: flex;
        align-items: center;
        gap: 15px;
        /* CORRECTION: Utilise la variable spécifique pour la barre de recherche */
        background-color: var(--search-bar-bg);
        padding: 4px 15px;
        border-radius: 9999px;
        /* CORRECTION: Forme de pilule parfaite */
        box-sizing: border-box;
        /* Assure que le padding est inclus dans la largeur */
        width: calc(100% - 16px);
        margin: 6px 8px 0;
        /* NOUVEAU: Animation de glissement */
        max-height: 0;
        padding-top: 0;
        padding-bottom: 0;
        overflow: hidden;
        transition: max-height 0.4s ease-out, padding 0.4s ease-out;
    }

    .search-bar.visible {
        max-height: 100px; /* Hauteur suffisante pour s'afficher */
        padding: 4px 15px;
    }

    /* CORRECTION: Supprime la bordure moche de l'input */
    .search-bar input {
        border: none;
        outline: none;
        background: none;
        flex-grow: 1;
        /* CORRECTION: Permet à l'input de prendre tout l'espace disponible */
    }

    /* NOUVEAU: Cache les nouveaux paramètres sur ordinateur */
    .mobile-only-setting {
        display: flex;
        /* Visible par défaut (sur mobile) */
    }

    /* NOUVEAU: Ajuste la taille du badge sur mobile */
    .filter-count-badge {
        width: 16px;
        height: 16px;
        font-size: 10px;
    }

    .top-bar-btn {
        width: clamp(35px, 9vw, 45px);
        height: clamp(35px, 9vw, 45px);
        font-size: clamp(1rem, 4vw, 1.3rem);
        flex-shrink: 0;
    }

    /* CORRECTION: Ajout de la position relative pour permettre au point de notification de s'afficher correctement. */
    #mobile-notifications-btn {
        position: relative;
        /* z-index retiré pour éviter les conflits de contexte d'empilement */
    }

    .search-bar input {
        font-size: 1rem;
    }

    /* NOUVEAU: Styles pour le sélecteur de profil sur mobile */
    .central-profiles-card {
        display: none;
        /* On cache la version PC sur mobile */
    }

    .profile-switch {
        display: flex;
        /* Le conteneur est maintenant un simple flexbox */
        width: 100%;
        border-bottom: 1px solid var(--ui-bar-border);
        /* CORRECTION: Ajout d'une ligne de séparation générale */
        margin-top: 8px;
        /* CORRECTION: Ajoute un espace au-dessus des onglets */
    }

    .profile-switch-btn {
        padding: 10px 12px;
        /* Padding vertical augmenté */
        display: flex;
        align-items: center;
        justify-content: center;
        /* Centre le contenu */
        gap: 8px;
        font-weight: 600;
        transition: all 0.2s ease;
        background: none;
        border: none;
        color: var(--text-color);
        flex-grow: 1;
        /* Chaque bouton prend 50% de la largeur */
        border-bottom: 2px solid transparent;
        /* CORRECTION: Bordure inactive plus fine */
        margin-bottom: -1px;
        /* CORRECTION: Permet à la bordure active de se superposer à la bordure générale */
    }

    .profile-switch-btn.active {
        color: var(--active-color);
        border-bottom-color: var(--active-color);
        /* La bordure devient active */
    }

    .profile-tab {
        flex-grow: 0;
        /* MODIFICATION: Ne grandit pas pour remplir l'espace */
        justify-content: center;
        /* Centre le contenu du bouton */
        padding: 8px 12px;
        /* MODIFICATION: Padding réduit */
        gap: 8px;
        /* MODIFICATION: Espace réduit entre l'icône et le texte */
    }

    .profile-tab img {
        width: 24px;
        /* MODIFICATION: Taille de l'avatar réduite */
        height: 24px;
    }

    .profile-tab span {
        font-size: 0.9em;
        /* MODIFICATION: Taille du texte réduite */
    }

    .content-sections-card {
        /* CORRECTION: Simplification de la grille pour une meilleure robustesse.
       Crée des colonnes flexibles d'au moins 140px. Sur les écrans très étroits,
       cela passera automatiquement à une seule colonne, ce qui est la solution la plus flexible. */
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        gap: var(--mobile-spacing);
    }

    /* NOUVEAU: Rétablit une taille de colonne plus petite pour les grilles de titres sur mobile */
    .content-sections-card.titles-grid {
        /* CORRECTION : La largeur minimale est réduite à 135px pour garantir au moins 2 colonnes même sur les plus petits écrans mobiles (ex: 320px),
       en tenant compte du padding et de l'espace entre les cartes.
       Cela assure la cohérence entre la bibliothèque (qui a un peu moins d'espace à cause des onglets) et les autres sections. */
        grid-template-columns: repeat(auto-fill, minmax(135px, 1fr));
        gap: 15px;
        /* Un espacement un peu plus grand pour la grille de titres */
    }

    /* NOUVEAU: Règle spécifique pour la bibliothèque sur mobile pour garantir 2 colonnes */
    #library-container.titles-grid {
        grid-template-columns: repeat(auto-fill, minmax(135px, 1fr));
        gap: 15px;
    }

    /* MODIFICATION: Taille des icônes réduite pour le mobile */
    .like-btn-card,
    .add-playlist-btn-card {
        font-size: 1.1em !important;
    }

    .card-actions {
        gap: 15px;
    }

    @media (orientation: landscape) and (max-height: 500px) {
        .top-bar {
            padding: 2px 8px;
        }

        .bottom-ui-container {
            padding-top: 2px;
        }
    }

    /* CORRECTION: Optimisation de l'animation de fond pour mobile */
    .circles li:nth-child(2),
    .circles li:nth-child(5),
    .circles li:nth-child(7),
    .circles li:nth-child(8),
    .circles li:nth-child(9) {
        display: none;
        /* On cache la moitié des bulles */
    }

    /* === NOUVEAU MODE LISTE (MOBILE) === */
    /* CORRECTION: La règle est maintenant dans une media query pour ne pas affecter le bureau */
    @media (max-width: 952px) {

        .content-sections-card.list-view .card,
        .list-view-header {
            /* Colonnes pour mobile: #, Image, Titre, Like, Add */
            /* CORRECTION: Colonne de l'image et espacement réduits */
            grid-template-columns: 20px 40px 1fr 35px 35px;
            /* #, Img, Titre, Like, Add */
            gap: 0.5rem;
            /* 8px */
            padding: 0;
            /* CORRECTION: Padding latéral retiré */
        }

        /* NOUVEAU: Masque les colonnes Artiste et Tags sur mobile */
        .list-view-artist-col,
        .list-view-tags-col {
            display: none;
        }

        /* NOUVEAU: Cache l'en-tête de la liste sur mobile car il n'est pas nécessaire */
        .list-view-header {
            display: none;
        }

        /* NOUVEAU: Styles pour permettre le défilement du titre en mode liste mobile */
        .content-sections-card.list-view .card .list-view-title {
            overflow: hidden;
            /* Cache le texte qui dépasse */
            white-space: nowrap;
            /* Empêche le retour à la ligne */
        }

        /* NOUVEAU: Réduit la taille du texte pour le mode liste sur mobile */
        .content-sections-card.list-view .card .text-sm,
        .content-sections-card.list-view .card .text-base {
            font-size: 0.8rem;
            /* 12.8px - Taille plus petite et plus adaptée */
        }

        /* NOUVEAU: Réduit la taille pour l'artiste, les tags et les icônes en mode liste */
        .content-sections-card.list-view .card .text-xs {
            font-size: 0.7rem;
            /* ~11px */
        }

        .content-sections-card.list-view .card .like-btn-card,
        .content-sections-card.list-view .card .add-playlist-btn-card {
            font-size: 0.8rem;
            /* ~12.8px - Taille des icônes encore plus réduite */
        }
    }

    /* On réduit la taille des bulles restantes */
    .circles li:nth-child(1) {
        width: 40px;
        height: 40px;
    }

    .circles li:nth-child(3) {
        width: 15px;
        height: 15px;
    }

    .circles li:nth-child(4) {
        width: 35px;
        height: 35px;
    }

    .circles li:nth-child(6) {
        width: 60px;
        height: 60px;
    }

    .circles li:nth-child(10) {
        width: 80px;
        height: 80px;
    }

    /* === NOUVEAU TABLEAU DE BORD (MOBILE) === */
    .dashboard-grid {
        /* CORRECTION: La grille s'adapte maintenant à la largeur de l'écran sur mobile */
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        /* MODIFICATION: Espace encore augmenté pour plus d'aération */
    }

    /* CORRECTION: Harmonise la taille des titres de section sur le tableau de bord mobile */
    .dashboard-grid .section-title {
        font-size: 1.2em;
        margin-bottom: 10px;
    }

    /* NOUVEAU: Assure que les lignes du tableau de bord s'empilent sur mobile */
    .dashboard-top-row,
    .dashboard-row-split {
        display: contents;
        /* Annule la grille pour que les enfants directs redeviennent des items de la grille principale */
    }

    /* NOUVEAU: Réduit la taille des cartes de playlists recommandées sur mobile */
    .horizontal-scroll-container {
        gap: 15px;
        /* Espace réduit entre les cartes */
    }

    .horizontal-scroll-container .card {
        flex: 0 0 110px;
        /* CORRECTION: Largeur des cartes de playlist réduite */
        width: 110px;
    }

    /* CORRECTION: Harmonise la taille du titre des playlists recommandées */
    .horizontal-scroll-container .card-reco-playlist .card__title {
        font-size: 0.8em;
        /* CORRECTION: Taille du titre réduite */
        font-weight: 600;
    }


    /* NOUVEAU: Réduit la taille des cartes d'arrière-plan dans la boutique sur mobile */
    .horizontal-scroll-container .shop-product-card {
        flex: 0 0 130px;
        /* Largeur fixe pour les cartes d'arrière-plan */
    }


    /* NOUVEAU: Réduit la taille de l'icône dans les cartes de playlist recommandées sur mobile */
    .card-reco-playlist .card-icon-bg i {
        font-size: 2.5em;
        /* CORRECTION: Taille de l'icône réduite */
    }

    /* NOUVEAU: Ajoute un espacement en bas de la section des réseaux sociaux sur mobile */
    .dashboard-socials-section {
        padding-bottom: 25px;
        /* CORRECTION: Padding rétabli et légèrement augmenté */
    }

    /* NOUVEAU: Réduit la taille des boutons de réseaux sociaux sur mobile */
    .dashboard-socials-section .Btn {
        width: 40px;
        height: 40px;
    }

    .dashboard-socials-section .Btn i {
        font-size: 1.2em;
        /* Taille de l'icône réduite */
    }


    /* NOUVEAU: Styles pour la section des guides sur le dashboard mobile */
    .dashboard-guide-section {
        display: flex;
        /* S'affiche par défaut sur mobile, sera caché sur PC */
        flex-direction: column;
        gap: 10px;
    }

    /* NOUVEAU: Conteneur pour les boutons du guide sur le dashboard */
    #dashboard-guide-buttons {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    /* CORRECTION: Harmonise la taille du texte des boutons du guide */
    .guide-choice-btn {
        font-size: 0.9em;
        padding: 12px;
    }

    /* NOUVEAU: Assure que la section "À propos" prend toute la largeur sur mobile */
    .dashboard-about-section {
        grid-column: 1 / -1;
    }

    /* NOUVEAU: Styles pour la carte "À propos" sur mobile */
    .dashboard-about-card {
        display: flex;
        /* CORRECTION: L'image est dézoomée et contenue dans la carte. */
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-color: #000;
        /* CORRECTION: Ajoute un fond noir autour de l'image. */
        position: relative;
        min-height: 150px;
        /* Hauteur minimale pour que la carte soit visible */
    }

    .carousel-item {
        /* MODIFICATION: Retour à une disposition horizontale avec des ajustements */
        flex-direction: row;
        align-items: center;
        /* Centre les éléments verticalement */
        gap: 10px;
        /* CORRECTION: Espace réduit pour une carte plus compacte */
        padding: 4px;
        /* CORRECTION: Padding encore réduit */
    }

    .carousel-item img {
        /* MODIFICATION: Image carrée de taille moyenne */
        width: 100px;
        /* CORRECTION: Taille de l'image restaurée */
        height: 100px;
        flex-shrink: 0;
        /* Empêche l'image de se réduire */
    }

    .carousel-item-info {
        /* MODIFICATION: Le texte est aligné à gauche */
        text-align: left;
        display: flex;
        flex-direction: column;
        /* Empile les éléments d'info */
        align-items: flex-start;
        /* Aligne les éléments (titre, bouton) à gauche */
        min-width: 0;
        /* Empêche le conteneur de déborder */
    }

    .carousel-item-info h3 {
        font-size: 0.9em;
        /* CORRECTION: Taille du titre restaurée */
    }

    .carousel-item-info p {
        font-size: 0.75em;
        /* CORRECTION: Taille de la description restaurée */
        text-align: justify;
        /* Justifie le texte */
        white-space: normal;
        /* Permet au texte de passer à la ligne */
    }

    /* NOUVEAU: Réduit la taille des points du carrousel sur mobile */
    .carousel-dots button {
        width: 7px;
        height: 7px;
        padding: 0;
        /* CORRECTION: Supprime tout padding qui pourrait déformer le bouton */
    }

    .liked-preview-grid {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        justify-content: center;
        max-width: 200px;
        /* Limite la largeur pour un meilleur affichage */
        margin: 15px auto;
    }

    /* CORRECTION: Le bouton est ajusté pour le contenu qui apparaît au survol/tap */
    .liked-preview-card .dashboard-card-button {
        width: auto;
        padding: 8px 20px;
    }

    /* CORRECTION: Harmonise la taille du texte du bouton "Voir tous les titres" */
    .dashboard-card .dashboard-card-button {
        font-size: 0.8em;
    }


    /* CORRECTION: Masquer le lecteur de bureau et la poignée de bureau sur mobile */
    .bottom-ui-container,
    #player-toggle-handle {
        display: none !important;
    }



    #music-title-details-section .music-details-grid {
        grid-template-columns: 1fr;
    }

    /* CORRECTION: La hauteur est maintenant automatique pour permettre le défilement */
    #music-title-details-section .music-details-grid {
        height: auto;
    }

    #music-title-details-section .music-details-container {
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }

    /* Ajoute un espacement entre la pochette et les infos */
    /* MODIFICATION: Centrage du panneau des vidéos associées et de son contenu texte */
    #music-title-details-section .associated-videos-panel {
        justify-self: center;
        margin: 20px 0;
        text-align: center;
        max-width: 100%;
    }

    /* Assure qu'il ne déborde pas sur les très petits écrans */
    #details-album-art {
        width: 100%;
        height: auto;
        max-width: 300px;
    }

    .music-info-panel {
        width: 100%;
        text-align: center;
    }

    .music-info-panel p strong {
        display: block;
        margin-bottom: 4px;
    }

    .streaming-links-container {
        justify-content: center;
    }

    /* AJOUT : S'assurer que les tags sont bien centrés */
    .streaming-links-container a {
        font-size: 2rem;
    }

    /* CORRECTION: Amélioration du positionnement et du centrage du guide sur mobile */
    /* NOUVEAU: Media query pour les très petits écrans (ex: iPhone SE) */
    @media (max-width: 380px) {
        #music-title-details-section .music-details-container {
            gap: 15px;
            /* Réduit l'espace entre la pochette et les infos */
        }

        #details-album-art {
            max-width: 250px;
            /* Réduit la taille maximale de la pochette */
        }

        .music-info-panel h2 {
            font-size: 1.5em;
            /* Réduit la taille du titre principal */
        }

        .music-info-panel h3 {
            font-size: 1.1em;
            /* Réduit la taille des sous-titres (Inspirations, Tags...) */
        }
    }

    /* CORRECTION: Amélioration du positionnement et du centrage du guide sur mobile */
    #tutorial-box {
        width: 90%;
        left: 50%;
        transform: translateX(-50%);
    }

    #tutorial-box.pos-top {
        top: 70px;
        bottom: auto;
    }

    #tutorial-box.pos-bottom {
        bottom: 80px;
        top: auto;
    }

    #tutorial-box.pos-center {
        top: 50%;
        transform: translate(-50%, -50%);
    }

    /* NOUVEAU: Supprime le fond grisé des overlays qui s'affichent en panneau sur mobile */
    #settings-overlay,
    #notifications-overlay,
    #shop-overlay,
    #achievements-overlay,
    #tags-filter-overlay,
    #playlist-overlay,
    #player-options-overlay,
    #reco-playlist-options-overlay,
    #queue-overlay {
        background-color: transparent;
    }

    /* NOUVEAU: Style unifié pour les overlays en panneau inférieur sur mobile */
    #settings-overlay .settings-card,
    #notifications-overlay .settings-card,
    #shop-overlay .settings-card,
    #achievements-overlay .settings-card,
    #tags-filter-overlay .settings-card,
    #playlist-overlay .settings-card,
    #player-options-overlay .settings-card,
    #reco-playlist-options-overlay .settings-card,
    #queue-overlay .settings-card {
        position: fixed;
        /* CORRECTION: La couleur de fond est gérée par les variables de thème, on ne la force plus en transparent ici. */
        backdrop-filter: none;
        bottom: 0;
        /* Le panneau est toujours en bas */
        left: 0;
        right: 0;
        width: 100%;
        max-width: 100%;
        border-radius: 24px 24px 0 0;
        /* CORRECTION: Rayon un peu plus grand pour un look plus doux */
        margin: 0;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        /* Animation plus fluide */
    }

    /* NOUVEAU: Amélioration de la typographie et de l'espacement dans les panneaux mobiles */
    .settings-card h2 {
        font-size: 1.1em;
        /* CORRECTION: Titre encore un peu plus petit pour l'harmonie */
        font-weight: 600;
        text-align: center;
        padding-bottom: 15px;
        /* Espace sous le titre */
        margin-top: 10px;
        /* Espace au-dessus du titre (après la poignée) */
    }

    .settings-card .setting-item,
    .settings-card .playlist-item,
    .settings-card .queue-item,
    .settings-card .tag-filter-item label {
        font-size: 0.95rem;
        padding: 5px 10px;
        /* CORRECTION: Espacement vertical réduit pour un panneau plus compact */
    }

    /* CORRECTION: Assure un bon alignement vertical pour les labels avec icône */
    .settings-card .setting-label-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .settings-card .playlist-item-info .playlist-item-title,
    .settings-card .queue-item .playlist-item-title {
        font-size: 0.95rem;
        /* CORRECTION: Taille de police légèrement réduite */
    }

    .settings-card .playlist-item-info .playlist-item-subtitle,
    .settings-card .queue-item .playlist-item-subtitle {
        font-size: 0.8rem;
        /* Sous-titre un peu plus petit */
    }

    /* Styles pour la barre de navigation mobile */
    .mobile-bottom-nav {
        /* La classe .mobile-bottom-nav est conservée pour la clarté */
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: var(--ui-bar-bg);
        border-top: 1px solid var(--ui-bar-border);
        display: flex;
        /* Le !important a été retiré, c'est correct. */
        justify-content: center;
        /* CORRECTION: Centre le groupe de boutons */
        padding: 8px 5px;
        /* CORRECTION: Padding vertical et un léger padding horizontal */
        z-index: 100;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    }

    .mobile-nav-link {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        color: var(--icon-color);
        text-decoration: none;
        font-size: 0.6em;
        /* CORRECTION: On peut remettre une taille lisible */
        font-weight: 600;
        padding: 4px 8px;
        border-radius: 8px;
        transition: color 0.2s;
        background: none;
        border: none;
        flex: 1;
        /* CORRECTION: Force chaque bouton à prendre une part égale de l'espace */
        text-align: center;
        /* CORRECTION: Assure que le texte est centré dans l'espace alloué */
    }

    .mobile-nav-link span {
        max-width: 100%;
        /* Le texte ne dépassera pas la largeur de son bouton */
        line-height: 1.2;
        /* Améliore la lisibilité si le texte passe à la ligne */
        height: 1em;
        /* Hauteur fixe pour 2 lignes, évite les sauts de layout */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* NOUVEAU: Style pour les icônes SVG de la barre de navigation mobile */
    .mobile-nav-link svg {
        width: 28px;
        height: 28px;
        stroke-width: 2;
        margin-bottom: 2px;
        /* Petit espace sous l'icône */
    }

    .mobile-nav-link.active,
    .mobile-nav-link.player-active {
        color: var(--active-color);
    }

    /* NOUVEAU: Styles pour le mini-lecteur mobile */
    .mobile-mini-player {
        position: fixed;
        bottom: 60px;
        /* Se place juste au-dessus de la barre de navigation */
        left: 0;
        /* CORRECTION: Prend toute la largeur */
        right: 0;
        /* CORRECTION: Prend toute la largeur */
        background-color: #f9fafb;
        /* CORRECTION: Fond légèrement gris pour le distinguer */
        background-color: var(--ui-bar-bg);
        /* CORRECTION: Fond légèrement gris pour le distinguer */
        border-top: 1px solid var(--ui-bar-border);
        /* CORRECTION: Ajout d'une bordure de séparation */
        border-radius: 0;
        /* CORRECTION: Plus de bords arrondis */
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
        /* CORRECTION: Ombre plus subtile, comme la barre de nav */
        z-index: 99;
        overflow: hidden;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        transform: translateY(20px);
        opacity: 0;
    }

    .mobile-mini-player:not(.hidden) {
        transform: translateY(0);
        opacity: 1;
    }

    .mini-player-progress {
        width: 100%;
        height: 3px;
        background-color: var(--icon-hover-bg);
    }

    .mini-player-progress-fill {
        width: 0%;
        height: 100%;
        background-color: var(--active-color);
        transition: width 0.2s linear;
    }

    .mini-player-content {
        display: flex;
        align-items: center;
        padding: 8px;
        gap: 10px;
    }

    .mini-player-content img {
        width: 45px;
        height: 45px;
        border-radius: 8px;
        object-fit: cover;
        /* NOUVEAU: Remonte légèrement la pochette pour un meilleur alignement visuel */
        position: relative;
        bottom: 4px;
    }

    .mini-player-info {
        flex-grow: 1;
        overflow: hidden;
        /* NOUVEAU: Passage en flex pour gérer le titre et le contexte */
        display: flex;
        flex-direction: column;
        justify-content: center;
        white-space: nowrap;
    }

    .mini-player-info h4 {
        margin: 0;
        font-size: 0.9em;
        /* Taille de police réduite */
        font-weight: 700;
        /* Styles pour le défilement */
        white-space: nowrap;
        overflow: hidden;
        width: 100%;
    }

    .mini-player-context-text {
        font-size: 0.6em;
        color: var(--text-color);
        opacity: 0.7;
        margin: 1px 0 0 0;
        width: 100%;
        text-align: left;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* NOUVEAU: Centre le texte quand il n'y a pas de titre */
    .mini-player-info.no-track {
        text-align: center;
        transform: translateX(-30px);
    }

    .mini-player-info h4>span {
        display: inline-block;
        animation: inherit;
        /* CORRECTION: Assure que l'animation de défilement est appliquée */
    }

    .mini-player-controls {
        display: flex;
        align-items: center;
        gap: 20px;
        font-size: 1.2rem;
        padding-right: 5px;
        /* NOUVEAU: Cache le bouton play/pause quand on est en mode bulle */
        transition: opacity 0.2s;
    }

    /* CORRECTION: Règle manquante pour masquer le mini-lecteur lorsqu'il est fermé ou caché par swipe. */
    body.mobile-player-hidden .mobile-mini-player {
        transform: translateY(100%) !important;
        opacity: 0 !important;
    }

    /* === NOUVEAU: MODE BULLE POUR LE MINI-LECTEUR === */
    .mobile-mini-player.bubble-mode {
        /* Transformation en bulle */
        width: 65px;
        height: 65px;
        border-radius: 50%;
        padding: 0;
        bottom: 80px;
        /* Position initiale */
        right: 15px;
        left: auto;
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transition: width 0.3s ease, height 0.3s ease, border-radius 0.3s ease, left 0.3s ease, right 0.3s ease;
        overflow: visible;
        /* Permet aux icônes de déborder légèrement */
    }

    .mobile-mini-player.bubble-mode .mini-player-progress,
    .mobile-mini-player.bubble-mode .mini-player-info,
    .mobile-mini-player.bubble-mode #mini-player-close-btn {
        display: none;
        /* On cache tout sauf la pochette et les contrôles principaux */
    }

    .mobile-mini-player.bubble-mode .mini-player-content {
        padding: 0;
        height: 100%;
        width: 100%;
    }

    .mobile-mini-player.bubble-mode .mini-player-content img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        bottom: 0;
        /* Annule le décalage */
    }

    .mobile-mini-player.bubble-mode .mini-player-controls {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.3);
        /* CORRECTION: Fond de la bulle rendu plus transparent. */
        border-radius: 50%;
        width: 100%;
        height: 100%;
        justify-content: center;
        gap: 0;
        /* CORRECTION: Le conteneur est maintenant toujours visible mais non cliquable. */
        opacity: 1;
        pointer-events: none;
        transition: opacity 0.3s;
    }

    /* CORRECTION: Le bouton play/pause est maintenant parfaitement centré. */
    .mobile-mini-player.bubble-mode #mini-player-play-pause-btn {
        /* CORRECTION: On le sort du conteneur transparent et on le centre. */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        pointer-events: auto;
        /* CORRECTION: Seul le bouton play/pause redevient cliquable. */
    }

    .mobile-mini-player.bubble-mode .mini-player-controls i {
        color: white;
        font-size: 1.2rem;
    }

    /* NOUVEAU: Cache le bouton like en mode bulle, il n'y a que play/pause */
    .mobile-mini-player.bubble-mode #mini-player-like-btn,
    .mobile-mini-player.bubble-mode #mini-player-close-btn {
        display: none;
    }

    /* NOUVEAU: Styles pour le lecteur plein écran mobile */
    .mobile-full-player {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--ui-bar-bg);
        z-index: 1100;
        display: flex;
        /* CORRECTION: Utilise flexbox */
        flex-direction: column;
        justify-content: space-between;
        /* MODIFICATION: Idéal pour une structure à 3 blocs (haut, milieu, bas) */
        align-items: center;
        padding: 70px 25px 40px;
        /* CORRECTION: Ajustement du padding pour une meilleure répartition */
        box-sizing: border-box;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .mobile-full-player.active {
        transform: translateY(0);
    }

    /* MODIFICATION: Le bloc du haut ne prend que l'espace nécessaire */
    .mobile-player-top-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        /* Espace entre la pochette et les infos */
        width: 100%;
        /* Prend toute la largeur */
    }

    /* NOUVEAU: Wrapper pour le contenu du haut (pochette + infos) */
    .mobile-player-top-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        /* Espace entre la pochette et les infos */
    }

    /* NOUVEAU: Wrapper pour les contrôles principaux pour un meilleur espacement vertical */
    .mobile-player-main-controls-wrapper {
        display: flex;
        flex-direction: column;
        gap: 20px;
        /* Espace entre les infos, la barre de progression et les boutons */
        /* MODIFICATION: Ces propriétés ne sont plus nécessaires car le bloc ne s'étire plus */
        justify-content: center;
        width: 100%;
        transform: translateY(0);
    }

    /* NOUVEAU: Ajustements pour les overlays sur mobile */
    .settings-card {
        padding: 20px 15px;
        /* Padding horizontal réduit */
        max-height: 95vh;
        /* Hauteur maximale légèrement plus grande */
    }

    .settings-card h2 {
        font-size: 1.3em;
        /* Titre légèrement plus petit */
        margin-bottom: 10px;
        padding-bottom: 10px;
    }

    /* NOUVEAU: Style pour la poignée de fermeture du lecteur mobile */
    .mobile-player-handle {
        position: absolute;
        top: 8px;
        left: 50%;
        transform: translateX(-50%);
        width: 40px;
        height: 5px;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 2.5px;
    }

    /* NOUVEAU: Ajoute une transition pour la fermeture par swipe */
    .mobile-full-player:not(.active) {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .mobile-player-header {
        position: absolute;
        /* CORRECTION: Positionne le header en haut */
        top: 20px;
        /* CORRECTION: Le header contient maintenant les boutons de gauche et de droite */
        right: 0;
        width: 100%;
        display: flex;
        /* Reste en flex pour la structure, mais plus besoin de justifier */
        align-items: center;
        flex-shrink: 0;
        /* MODIFICATION: Ajout d'un padding pour aligner avec le reste du contenu */
        box-sizing: border-box;
        padding: 0 20px;
        /* CORRECTION: Padding symétrique pour aligner les deux boutons */
    }

    .mobile-player-header-btn {
        /* Style pour l'ancien bouton, maintenant masqué */
        font-size: 1.5rem;
        color: var(--icon-color);
        background: none;
        border: none;
    }

    /* NOUVEAU: Ajuste la taille du bouton autoplay pour qu'il soit symétrique au bouton fermer */
    .mobile-player-header .autoplay-btn {
        font-size: 1.5rem;
    }

    .mobile-player-art {
        width: 70vw;
        max-width: 300px;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        /* CORRECTION: 'cover' est souvent plus esthétique pour les pochettes carrées */
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .mobile-player-song-info {
        margin-top: 20px;
        /* CORRECTION: Ajoute un espace au-dessus du titre */
        text-align: center;
    }

    .mobile-player-song-info h3 {
        font-size: 1.5em;
        font-weight: 700;
        margin: 0 0 5px 0;
        white-space: nowrap;
        overflow: hidden;
        width: 100%;
    }

    .mobile-player-song-info p {
        font-size: 1em;
        color: var(--text-color);
        opacity: 0.8;
        margin: 0;
        white-space: nowrap;
        /* CORRECTION: Empêche le retour à la ligne */
        overflow: hidden;
        width: 100%;
    }

    .mobile-player-song-info h3>span,
    .mobile-player-song-info p>span {
        display: inline-block;
    }

    /* MODIFICATION: Le défilement est actif par défaut */
    .mini-player-info .scrolling>span,
    .mobile-player-song-info .scrolling>span {
        animation: scroll-title var(--scroll-duration, 5s) linear infinite;
    }

    /* CORRECTION: Définition de l'animation directement ici pour assurer la cohérence */
    @keyframes scroll-title {
        0% {
            transform: translateX(0);
        }

        80% {
            transform: translateX(var(--overflow-width, -50px));
        }

        100% {
            transform: translateX(var(--overflow-width, -50px));
        }
    }

        /* NOUVEAU: Masque l'icône de loupe DANS la barre de recherche sur ordinateur */
        @media (min-width: 953px) {
            .search-bar .lucide-search-icon {
                display: none;
            }
        }
    }
}

    .mobile-player-secondary-controls {
        display: flex;
        gap: 35px;
        /* CORRECTION: Espacement réduit entre les icônes */
        justify-content: center;
        font-size: 1.5rem;
        /* CORRECTION: Taille des icônes harmonisée */
        color: var(--icon-color);
        margin-top: 25px;
        /* CORRECTION: Marge légèrement ajustée */
    }

    .mobile-player-secondary-controls .autoplay-btn {
        font-size: 1.5rem;
        /* Assure la même taille que les autres icônes */
    }

    .mobile-player-progress {
        width: 100%;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    /* CORRECTION: Styles pour la barre de progression, similaires à la version ordinateur */
    .mobile-player-progress .progress-bar {
        flex-grow: 1;
        height: 6px;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 3px;
    }

    /* CORRECTION: Ajout de la couleur pour la barre de progression */
    .mobile-player-progress .progress-fill {
        height: 100%;
        background-color: var(--active-color);
        border-radius: 3px;
    }

    .mobile-player-controls {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 35px;
        width: 100%;
        font-size: 1.6rem;
        /* CORRECTION: Taille des icônes précédent/suivant légèrement réduite */
    }

    /* CORRECTION: Réduit la taille des boutons shuffle et loop pour une meilleure hiérarchie */
    #mobile-player-shuffle-btn,
    #mobile-player-loop-btn {
        font-size: 1.3rem;
    }

    /* CORRECTION: Harmonisation du style du bouton Play */
    .mobile-player-play-box {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: transparent;
        /* CORRECTION: Pas de fond pour un style minimaliste */
        border-radius: 50%;
        width: 70px;
        height: 70px;
        transition: background-color 0.2s ease;
        box-shadow: none;
        /* CORRECTION: Pas d'ombre */
    }

    .mobile-player-play-box i {
        font-size: 1.8rem;
        color: var(--text-color);
        /* CORRECTION: L'icône a la couleur du texte */
    }

    /* CORRECTION: Style pour les boutons actifs (shuffle, loop) */
    .mobile-player-controls .fas.active {
        color: var(--active-color);
        transform: scale(1.1);
    }

    /* CORRECTION: Styles pour le nouveau contrôle de volume à boutons */
    .mobile-player-volume-wrapper {
        width: 100%;
        display: flex;
        justify-content: center;
        padding: 10px 0;
    }

    /* On réutilise les styles du lecteur de bureau pour la cohérence */
    #mobile-player-volume-control.volume-control-new {
        padding: 8px 12px;
        /* Padding un peu plus grand pour le mobile */
    }

    /* NOUVEAU: Styles pour les tablettes en mode portrait */
    @media (min-width: 600px) and (max-width: 952px) and (orientation: portrait) {
        .mobile-player-art {
            max-width: 450px;
            /* Pochette plus grande */
        }

        .mobile-player-song-info h3 {
            font-size: 2em;
            /* Titre plus grand */
        }

        .mobile-player-song-info p {
            font-size: 1.2em;
            /* Artiste plus grand */
        }

        .mobile-player-controls {
            gap: 30px;
            /* Espace plus grand entre les contrôles */
        }
    }

    /* NOUVEAU: Conteneur pour les boutons en bas à gauche et à droite */
    .mobile-player-bottom-actions {
        width: 100%;
        display: flex;
        justify-content: space-between;
        /* Aligne les éléments sur les bords et au centre */
        align-items: center;
        /* Centre verticalement les icônes et le contrôle de volume */
        padding: 0 10px;
        /* Padding horizontal réduit pour rapprocher les icônes des bords */
        /* margin-top: auto; /* N'est plus nécessaire avec la nouvelle structure flexbox */
    }

    .mobile-player-bottom-actions i {
        font-size: 1.5rem;
        /* Taille cohérente avec les autres contrôles secondaires */
        color: var(--icon-color);
        transition: color 0.2s ease, transform 0.2s ease;
        padding: 10px;
        /* Zone de clic plus grande */
    }

    /* CORRECTION: Cible les boutons par leur ID pour plus de spécificité et s'assure qu'ils prennent la bonne couleur. */
    #mini-player-like-btn.active,
    #mobile-player-like-btn.active {
        color: #e91e63;
        /* Rose pour le like */
    }

    /* CORRECTION: Cible le bouton d'ajout par son ID et s'assure qu'il prend la bonne couleur. */
    #mini-player-add-to-playlist-btn.added,
    /* Cible le bouton du mini-lecteur (non utilisé pour l'instant mais prêt) */
    #mobile-player-add-to-playlist-btn.added {
        color: var(--active-color);
        /* Bleu pour l'ajout */
    }

    /* NOUVEAU: Styles pour le panneau de la file d'attente mobile */
    .mobile-queue-panel-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1150;
        /* Juste en dessous du panneau lui-même */
        opacity: 0;
        transition: opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        /* Animation d'apparition */
    }

    /* NOUVEAU: Ajoute une transition pour l'ouverture par swipe */
    .mobile-queue-panel-backdrop:not(.hidden) {
        opacity: 1;
        transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .mobile-queue-panel-backdrop:not(.hidden) {
        opacity: 1;
    }

    /* NOUVEAU: Animation de fondu pour l'arrière-plan du panneau de la file d'attente */
    .mobile-queue-panel-backdrop.fading-out {
        opacity: 0;
    }

    .mobile-queue-panel {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 85vh;
        /* Prend 85% de la hauteur de l'écran */
        background-color: var(--ui-bar-bg);
        z-index: 1200;
        border-radius: 20px 20px 0 0;
        box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        /* CORRECTION: Animation unifiée pour l'ouverture et la fermeture */
    }

    /* NOUVEAU: Animation d'ouverture du panneau de la file d'attente */
    /* CORRECTION: La classe :not(.hidden) n'est plus nécessaire car l'animation est gérée par JS.
   On garde juste la transition de base sur l'élément.
*/

    .mobile-queue-handle-wrapper {
        padding: 12px 0;
        width: 100%;
        display: flex;
        justify-content: center;
        flex-shrink: 0;
    }

    .mobile-queue-handle {
        width: 40px;
        height: 5px;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 2.5px;
    }

    .mobile-queue-header {
        text-align: center;
        padding: 0 20px 10px;
        flex-shrink: 0;
    }

    .mobile-queue-header h2 {
        font-size: 1.2em;
        font-weight: 700;
    }

    .mobile-queue-context {
        padding: 0 20px 15px;
        font-size: 0.8em;
        color: var(--text-color);
        opacity: 0.8;
        border-bottom: 1px solid var(--ui-bar-border);
        flex-shrink: 0;
    }

    .mobile-queue-context p {
        margin: 0;
    }

    .mobile-queue-list {
        flex-grow: 1;
        overflow-y: auto;
        padding: 10px 20px;
    }

    /* NOUVEAU: Wrapper pour chaque élément, nécessaire pour le swipe-to-delete */
    .mobile-queue-list .playlist-item-wrapper {
        position: relative;
        overflow: hidden;
        /* Cache le bouton supprimer qui est en dehors */
        /* Le padding vertical est sur le wrapper pour créer l'espace pour la bordure */
        padding: 10px 0;
    }

    .mobile-queue-list .playlist-item-content {
        position: relative;
        z-index: 2;
        background-color: var(--ui-bar-bg);
        /* Important pour cacher le bouton rouge dessous */
        /* CORRECTION: Le padding est uniquement horizontal pour ne pas créer de décalage vertical. */
        padding: 0 20px;
        transition: transform 0.3s ease-out;
    }

    .mobile-queue-list .playlist-item-delete-action {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        /* CORRECTION: On ne définit plus de largeur fixe, on s'adapte à l'icône */
        width: 60px;
        /* Espace pour l'icône */
        background-color: transparent;
        /* CORRECTION: Le fond est maintenant transparent */
        color: #ef4444;
        /* CORRECTION: L'icône elle-même est rouge */
        display: flex;
        align-items: center;
        justify-content: center;
        /* Centre l'icône dans l'espace alloué */
        font-size: 1.2rem;
        z-index: 1;
    }

    .mobile-queue-list .playlist-item {
        /* NOUVEAU: La carte elle-même n'a plus de bordure basse, c'est le wrapper qui l'aura */
        border-bottom: none;
        background: none;
        /* Le fond est géré par le .playlist-item-content */
        padding: 0;
        /* Le padding est géré par le conteneur .playlist-item-content */
        /* On réutilise les styles de la playlist normale pour la simplicité */
    }

    /* NOUVEAU: Correction pour le texte invisible du titre en cours de lecture dans la file d'attente mobile */
    .mobile-queue-list .playlist-item.currently-playing {
        background-color: transparent;
        /* On retire le surlignage */
        color: var(--active-color);
        /* On applique la couleur active au texte */
    }

    .liked-preview-card {
        min-height: 200px;
        /* Hauteur réduite pour mobile */
    }

    .liked-preview-grid {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        justify-content: center;
        max-width: 200px;
        /* Limite la largeur pour un meilleur affichage */
        margin: 15px auto;
    }

    /* NOUVEAU: Ajustements pour l'invite d'installation PWA sur mobile */
    .pwa-install-card {
        padding: 20px;
        /* Padding réduit */
        gap: 10px;
        /* Espace réduit entre les éléments */
    }

    .pwa-icon {
        width: 60px;
        /* Icône plus petite */
        height: 60px;
        margin-bottom: 10px;
    }

    .pwa-install-card h2 {
        font-size: 1.2em;
        /* Titre plus petit */
        margin-bottom: 10px;
    }

    .pwa-install-card p,
    .pwa-install-card ul {
        font-size: 0.85em;
        /* Texte général plus petit */
        margin-bottom: 10px;
    }

    .pwa-install-card ul {
        margin-bottom: 15px;
    }

    .pwa-action-btn {
        padding: 10px 15px;
        /* Boutons plus petits */
        font-size: 0.9em;
    }

    .pwa-install-actions {
        margin-top: 10px;
    }

    /* NOUVEAU: Ajustements pour la boîte de dialogue (ex: Autoplay on/off) sur mobile */
    #custom-dialog {
        padding: 10px 20px;
        /* Padding réduit pour une boîte plus petite */
        border-radius: 12px;
        /* Bords un peu moins arrondis */
        font-size: 0.9em;
        /* Texte plus petit */
        bottom: 75px;
        /* Remonte la boîte pour ne pas être cachée par la barre de navigation */
    }

    /* NOUVEAU: Ajustements pour la bibliothèque sur mobile */
    #library-tabs-container {
        overflow-x: auto;
        /* Permet de faire défiler les onglets s'ils sont trop nombreux */
        white-space: nowrap;
        /* Empêche les onglets de passer à la ligne */
        -ms-overflow-style: none;
        /* NOUVEAU: Cache la barre de défilement sur Firefox */
        scrollbar-width: none;
    }

    /* NOUVEAU: Cache la barre de défilement sur les navigateurs WebKit (Chrome, Safari, etc.) */
    #library-tabs-container::-webkit-scrollbar {
        display: none;
    }


        .fade-in-left {
            animation: fadeInLeft 0.4s ease-out forwards;
        }

        /* NOUVEAU: Animation de transition pour le swipe dans la boutique */
        .shop-tab-content {
            animation: fadeInRight 0.4s ease-out forwards;
        }

        .shop-tab-content.hidden {
            display: none !important;
            /* Assure que l'élément est bien caché */
        }

        /* === NOUVEAU: REFONTE DE L'ÉCRAN D'ACCUEIL MOBILE === */
        @media (max-width: 952px) {
            #welcome-screen {
                background-color: var(--bg-color);
                align-items: center;
                /* Centre la boîte verticalement */
            }

            .welcome-box {
                width: 90%;
                max-width: 400px;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 15px;
                padding: 30px 20px;
                background-color: var(--card-style-bg);
                border: 1px solid var(--card-border);
            }

            .welcome-logo {
                width: 80px;
                height: 80px;
                border-radius: 15px;
                margin-bottom: 10px;
            }

            .welcome-title {
                font-size: 2em;
                font-weight: 700;
                color: var(--text-color);
                margin: 0;
            }

            .welcome-subtitle {
                font-size: 1em;
                color: var(--text-color);
                opacity: 0.8;
                margin: 0 0 15px 0;
            }

            .welcome-options {
                width: 100%;
                background-color: var(--icon-hover-bg);
                padding: 15px;
                border-radius: 10px;
                margin-bottom: 15px;
            }

            /* Réutilise le style du menu des paramètres pour la cohérence */
            .welcome-options .setting-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-weight: 600;
                font-size: 1em;
            }

            #start-music-btn {
                width: 100%;
                padding: 15px;
                font-size: 1.2em;
                background-color: var(--active-color);
                color: white;
            }

            body.dark-theme #start-music-btn {
                color: #121212;
            }
        }

        #mobile-notifications-btn .notification-dot {
            width: 10px !important;
            height: 10px !important;
            border-width: 1px !important;
        }

        /* NOUVEAU: Ajustements pour les écrans mobiles très courts (ex: iPhone SE) */
        @media (max-height: 680px) {
            .mobile-full-player {
                /* Réduit le padding vertical pour donner plus d'espace au contenu */
                padding-top: 50px;
                padding-bottom: 25px;
            }

            .mobile-player-top-content {
                gap: 10px;
                /* Réduit l'espace entre la pochette et le titre */
            }

            .mobile-player-art {
                /* Réduit la taille de la pochette */
                width: 65vw;
                max-width: 250px;
            }

            .mobile-player-main-controls-wrapper {
                gap: 15px;
                /* Réduit l'espace entre les blocs de contrôles */
            }

            .mobile-player-secondary-controls {
                margin-top: 15px;
                /* Réduit l'espace au-dessus des boutons like/+ */
                font-size: 1.3rem;
                /* Réduit la taille des icônes like/+ */
            }

            .mobile-player-controls {
                gap: 25px;
                /* Réduit l'espacement entre les boutons de lecture */
                font-size: 1.4rem;
                /* Réduit la taille des icônes prev/next */
            }

            .mobile-player-play-box {
                /* Réduit la taille du bouton play/pause */
                width: 60px;
                height: 60px;
            }
        }

        /* NOUVEAU: Ajustements globaux pour les très petits écrans (ex: iPhone SE) */
        @media (max-width: 360px) {

            /* Réduit la taille de la police de base, ce qui affecte les unités 'rem' */
            html {
                font-size: 14.5px;
            }

            /* Ajuste les variables de taille et d'espacement */
            :root {
                --mobile-title-size: clamp(15px, 5vw, 20px);
                --mobile-spacing: clamp(6px, 2.5vw, 10px);
            }

            /* Réduit la taille des icônes de la barre de navigation du bas */
            .mobile-nav-link svg {
                width: 26px;
                height: 26px;
            }

            /* Réduit la taille du texte sous les icônes de navigation */
            .mobile-nav-link {
                font-size: 0.55em;
            }

            /* NOUVEAU: Réduit la taille des icônes de la barre du haut */
            .top-bar-btn {
                width: clamp(32px, 8.5vw, 40px);
                height: clamp(32px, 8.5vw, 40px);
                font-size: clamp(1rem, 4vw, 1.2rem);
            }

            /* NOUVEAU: Réduit la taille de l'icône de recherche */
            .search-bar svg {
                width: 18px;
                height: 18px;
            }

            /* NOUVEAU: Réduit la taille des contrôles du mini-lecteur */
            .mini-player-controls {
                gap: 15px;
                /* Espacement réduit */
                font-size: 1.1rem;
                /* Icônes plus petites */
            }
        }
    }
}